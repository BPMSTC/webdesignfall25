<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Accessible ARIA Demo Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        margin: 0;
        padding: 0;
        line-height: 1.5;
      }

      .skip-link {
        position: absolute;
        left: -999px;
        top: 0;
        background: #000;
        color: #fff;
        padding: 8px 12px;
        z-index: 100;
      }

      .skip-link:focus {
        left: 8px;
      }

      header[role="banner"] {
        background: #004b8d;
        color: #fff;
        padding: 16px;
      }

      nav {
        background: #eee;
        padding: 8px 16px;
      }

      nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        gap: 16px;
      }

      nav a {
        text-decoration: none;
        color: #004b8d;
      }

      nav a[aria-current="page"] {
        font-weight: bold;
        border-bottom: 2px solid #004b8d;
      }

      main[role="main"] {
        padding: 16px;
      }

      section {
        margin-bottom: 32px;
        max-width: 700px;
      }

      .field {
        margin-bottom: 12px;
      }

      label {
        display: block;
        font-weight: 600;
      }

      input[type="text"],
      input[type="email"],
      select {
        width: 100%;
        max-width: 400px;
        padding: 6px;
        margin-top: 4px;
      }

      .help-text {
        font-size: 0.9rem;
        color: #555;
      }

      .accordion {
        border: 1px solid #ccc;
        border-radius: 6px;
        padding: 10px;
      }

      .accordion-item + .accordion-item {
        margin-top: 8px;
      }

      .accordion-button {
        width: 100%;
        text-align: left;
        padding: 10px;
        background: #f2f2f2;
        border: none;
        font-size: 1rem;
        cursor: pointer;
        border-radius: 4px;
      }

      .accordion-button:focus {
        outline: 2px solid #005fcc;
      }

      .accordion-panel {
        padding: 10px;
        border-left: 3px solid #005fcc;
        margin-top: 6px;
      }

      .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      .toolbar {
        margin: 16px 0;
      }

      .toolbar button {
        margin-right: 8px;
      }

      #live-status {
        margin-top: 12px;
        padding: 8px;
        border-radius: 4px;
        font-size: 0.95rem;
      }

      footer[role="contentinfo"] {
        margin-top: 40px;
        padding: 16px;
        background: #f7f7f7;
        border-top: 1px solid #ddd;
        text-align: center;
      }

      /* Simple "dark" theme toggle example */
      body.dark {
        background: #202124;
        color: #e8eaed;
      }

      body.dark header[role="banner"] {
        background: #1a73e8;
      }

      body.dark nav {
        background: #303134;
      }

      body.dark nav a {
        color: #e8eaed;
      }

      body.dark nav a[aria-current="page"] {
        border-bottom-color: #fff;
      }

      body.dark .accordion {
        border-color: #555;
      }

      body.dark .accordion-button {
        background: #303134;
        color: #e8eaed;
      }

      body.dark footer[role="contentinfo"] {
        background: #303134;
        border-top-color: #555;
      }

      /* Modal dialog styles */
      .backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
      }

      .backdrop[aria-hidden="false"] {
        display: flex;
      }

      .dialog {
        background: #fff;
        max-width: 400px;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      body.dark .dialog {
        background: #303134;
        color: #e8eaed;
      }

      .dialog header {
        margin-bottom: 8px;
      }

      .dialog footer {
        margin-top: 16px;
        text-align: right;
      }
    </style>
  </head>
  <body>
    <!-- Skip link for keyboard users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Landmark role for page header -->
    <header role="banner">
      <h1 id="site-title">Accessible ARIA Demo Page</h1>
      <p id="site-tagline">
        A teaching example that shows several common ARIA patterns.
      </p>
    </header>

    <!-- Navigation region with aria-label and aria-current -->
    <nav aria-label="Main navigation">
      <ul>
        <li><a href="#about" aria-current="page">About ARIA</a></li>
        <li><a href="#feedback">Feedback Form</a></li>
        <li><a href="#faq">FAQ Accordion</a></li>
      </ul>
    </nav>

    <!-- Main content landmark -->
    <main id="main-content" role="main" aria-busy="false">
      <!-- Section with aria-labelledby -->
      <section id="about" aria-labelledby="about-heading">
        <h2 id="about-heading">What is ARIA?</h2>
        <p>
          ARIA (Accessible Rich Internet Applications) is a set of attributes
          that help assistive technologies understand the role, state, and
          properties of elements, especially in custom or dynamic components.
        </p>
        <p>
          Native HTML elements should always be your first choice, but ARIA can
          fill in the gaps when you build custom widgets or need to clarify
          meaning.
        </p>
      </section>

      <!-- Form with aria-required, aria-describedby, and error example -->
      <section id="feedback" aria-labelledby="feedback-heading">
        <h2 id="feedback-heading">Feedback Form</h2>

        <p id="form-help" class="help-text">
          Fields marked with * are required. This example shows how ARIA can
          improve form accessibility.
        </p>

        <form aria-describedby="form-help">
          <div class="field">
            <label for="name-input">Name * </label>
            <input
              id="name-input"
              type="text"
              aria-required="true"
              aria-describedby="name-help"
            />
            <div id="name-help" class="help-text">
              Please enter your full name.
            </div>
          </div>

          <div class="field">
            <label for="email-input">Email * </label>
            <input
              id="email-input"
              type="email"
              aria-required="true"
              aria-describedby="email-help"
            />
            <div id="email-help" class="help-text">
              We will only use this to reply to your comment.
            </div>
          </div>

          <div class="field">
            <label for="topic-select">Topic</label>
            <select id="topic-select" aria-describedby="topic-help">
              <option value="">Select a topic</option>
              <option value="general">General question</option>
              <option value="accessibility">Accessibility</option>
              <option value="bug">Bug report</option>
            </select>
            <div id="topic-help" class="help-text">
              Optional, but helps route your feedback.
            </div>
          </div>

          <div class="field">
            <label for="message-textarea">Message *</label>
            <textarea
              id="message-textarea"
              rows="4"
              style="width: 100%; max-width: 400px"
              aria-required="true"
              aria-describedby="message-help"
            ></textarea>
            <div id="message-help" class="help-text">
              Describe your question or feedback in a few sentences.
            </div>
          </div>

          <!-- Live region for validation messages -->
          <div
            id="validation-errors"
            role="alert"
            aria-live="assertive"
            class="help-text"
            style="color: #b00020; min-height: 1.2em"
          >
            <!-- JavaScript will place error messages here -->
          </div>

          <button type="button" id="submit-button">Submit feedback</button>
        </form>
      </section>

      <!-- Toolbar with toggle button using aria-pressed and a live region -->
      <section aria-labelledby="toolbar-heading">
        <h2 id="toolbar-heading">Toolbar with ARIA Toggle Button</h2>
        <div class="toolbar" role="toolbar" aria-label="Display options">
          <button
            id="theme-toggle"
            type="button"
            aria-pressed="false"
            aria-label="Toggle dark theme"
          >
            Toggle dark theme
          </button>

          <button
            id="open-modal"
            type="button"
            aria-haspopup="dialog"
            aria-controls="info-dialog"
          >
            Open ARIA info dialog
          </button>
        </div>

        <!-- Polite live region for small status updates -->
        <div id="live-status" role="status" aria-live="polite">
          Theme is currently light.
        </div>
      </section>

      <!-- Accordion example with aria-expanded, aria-controls, aria-labelledby, role=region -->
      <section id="faq" aria-labelledby="faq-heading">
        <h2 id="faq-heading">FAQ Accordion</h2>

        <div class="accordion">
          <div class="accordion-item">
            <button
              class="accordion-button"
              id="acc-btn-1"
              aria-expanded="false"
              aria-controls="acc-panel-1"
            >
              When should I use ARIA?
            </button>
            <div
              class="accordion-panel"
              id="acc-panel-1"
              role="region"
              aria-labelledby="acc-btn-1"
              hidden
            >
              Use native HTML elements first. Add ARIA when you build custom
              components or when you need to clarify roles, states, or
              relationships.
            </div>
          </div>

          <div class="accordion-item">
            <button
              class="accordion-button"
              id="acc-btn-2"
              aria-expanded="false"
              aria-controls="acc-panel-2"
            >
              What does aria-expanded mean?
            </button>
            <div
              class="accordion-panel"
              id="acc-panel-2"
              role="region"
              aria-labelledby="acc-btn-2"
              hidden
            >
              The aria-expanded attribute tells assistive technology whether a
              collapsible element is currently expanded (true) or collapsed
              (false).
            </div>
          </div>

          <div class="accordion-item">
            <button
              class="accordion-button"
              id="acc-btn-3"
              aria-expanded="false"
              aria-controls="acc-panel-3"
            >
              What is a live region?
            </button>
            <div
              class="accordion-panel"
              id="acc-panel-3"
              role="region"
              aria-labelledby="acc-btn-3"
              hidden
            >
              A live region is an area of the page where updates are announced
              to screen readers automatically, without moving keyboard focus.
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Modal dialog example using role="dialog" and aria-modal -->
    <div class="backdrop" id="dialog-backdrop" aria-hidden="true">
      <div
        class="dialog"
        id="info-dialog"
        role="dialog"
        aria-modal="true"
        aria-labelledby="dialog-title"
        aria-describedby="dialog-description"
      >
        <header>
          <h2 id="dialog-title">About this dialog</h2>
        </header>
        <div id="dialog-description">
          This is a modal dialog example that uses
          <code>role="dialog"</code>, <code>aria-modal="true"</code>,
          <code>aria-labelledby</code>, and <code>aria-describedby</code>. Focus
          is trapped inside the dialog while it is open.
        </div>
        <footer>
          <button type="button" id="close-dialog">Close</button>
        </footer>
      </div>
    </div>

    <!-- Footer landmark -->
    <footer role="contentinfo">
      <p>Demo page for teaching ARIA usage in HTML, CSS, and JavaScript.</p>
    </footer>

    <script>
      // ---------------------------
      // Simple client-side validation with ARIA alert
      // ---------------------------
      const submitButton = document.getElementById("submit-button");
      const nameInput = document.getElementById("name-input");
      const emailInput = document.getElementById("email-input");
      const messageTextarea = document.getElementById("message-textarea");
      const validationErrors = document.getElementById("validation-errors");
      const mainElement = document.querySelector("main[role='main']");

      submitButton.addEventListener("click", () => {
        // Mark main as busy while "processing"
        mainElement.setAttribute("aria-busy", "true");
        validationErrors.textContent = "";

        const errors = [];

        if (!nameInput.value.trim()) {
          errors.push("Name is required.");
        }
        if (!emailInput.value.trim()) {
          errors.push("Email is required.");
        }
        if (!messageTextarea.value.trim()) {
          errors.push("Message is required.");
        }

        if (errors.length > 0) {
          validationErrors.textContent = errors.join(" ");
          mainElement.setAttribute("aria-busy", "false");
        } else {
          // Simulate a successful submission
          validationErrors.textContent = "Thank you for your feedback!";
          mainElement.setAttribute("aria-busy", "false");
        }
      });

      // ---------------------------
      // Toggle button for dark theme
      // ---------------------------
      const themeToggle = document.getElementById("theme-toggle");
      const liveStatus = document.getElementById("live-status");

      themeToggle.addEventListener("click", () => {
        const isPressed = themeToggle.getAttribute("aria-pressed") === "true";
        const newPressed = !isPressed;

        themeToggle.setAttribute("aria-pressed", String(newPressed));
        document.body.classList.toggle("dark", newPressed);

        liveStatus.textContent = newPressed
          ? "Theme is now dark."
          : "Theme is now light.";
      });

      // ---------------------------
      // Accordion behavior
      // ---------------------------
      const accordionButtons = document.querySelectorAll(".accordion-button");

      accordionButtons.forEach((button) => {
        button.addEventListener("click", () => {
          toggleAccordion(button);
        });

        // Optional: allow Enter and Space to activate the accordion via keyboard
        button.addEventListener("keydown", (event) => {
          if (event.key === "Enter" || event.key === " ") {
            event.preventDefault();
            toggleAccordion(button);
          }
        });
      });

      function toggleAccordion(button) {
        const isExpanded = button.getAttribute("aria-expanded") === "true";
        const panelId = button.getAttribute("aria-controls");
        const panel = document.getElementById(panelId);

        button.setAttribute("aria-expanded", String(!isExpanded));
        panel.hidden = isExpanded;
      }

      // ---------------------------
      // Modal dialog behavior
      // ---------------------------
      const openModalButton = document.getElementById("open-modal");
      const closeDialogButton = document.getElementById("close-dialog");
      const dialogBackdrop = document.getElementById("dialog-backdrop");
      const dialog = document.getElementById("info-dialog");

      let lastFocusedElementBeforeDialog = null;

      openModalButton.addEventListener("click", () => {
        lastFocusedElementBeforeDialog = document.activeElement;

        dialogBackdrop.setAttribute("aria-hidden", "false");
        dialog.setAttribute("tabindex", "-1");
        dialog.focus();

        // Optional: trap focus inside dialog
        document.addEventListener("keydown", handleDialogKeydown);
      });

      closeDialogButton.addEventListener("click", closeDialog);

      dialogBackdrop.addEventListener("click", (event) => {
        // Clicks outside the dialog close it
        if (event.target === dialogBackdrop) {
          closeDialog();
        }
      });

      function handleDialogKeydown(event) {
        if (event.key === "Escape") {
          closeDialog();
        }
      }

      function closeDialog() {
        dialogBackdrop.setAttribute("aria-hidden", "true");
        dialog.removeAttribute("tabindex");
        document.removeEventListener("keydown", handleDialogKeydown);

        if (lastFocusedElementBeforeDialog) {
          lastFocusedElementBeforeDialog.focus();
        }
      }
    </script>
  </body>
</html>
